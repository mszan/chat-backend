{% load static %}
{% load compress %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>app</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    {# SASS compressor. #}
    {% compress css %}
        {# Bootstrap custom theme. #}
        <link type="text/x-scss" href="{% static 'scss/bootstrap/theme.scss' %}" rel="stylesheet" media="screen">

        {# Base stylesheet. #}
        <link type="text/x-scss" href="{% static 'scss/base.scss' %}" rel="stylesheet" media="screen">
    {% endcompress %}

    {# Font Awesome. #}
    <script src="https://kit.fontawesome.com/1f366812cf.js" crossorigin="anonymous"></script>

</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top px-3">
    <a class="navbar-brand" href="#"><i class="fas fa-comments"></i> CHAT APP</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between">
        <ul class="navbar-nav mr-auto">
            {% with url_name=request.resolver_match.url_name %}
                <li class="nav-item {% if url_name == 'home' %}active{% endif %}">
                    <a class="nav-link" href={% url 'home' %}>Home</a>
                </li>
                <li class="nav-item {% if url_name == 'lobby' %}active{% endif %}">
                    <a class="nav-link" href={% url 'lobby' %}>Join</a>
                </li>
                <li class="nav-item {% if url_name == 'room-create' %}active{% endif %}">
                    <a class="nav-link" href={% url 'room-create' %}>Create</a>
                </li>
                <li class="nav-item {% if url_name == 'room' %}active{% endif %}">
                    <a class="nav-link" href={% url 'room' room_name='test' %}>Room 'test'</a>
                </li>
            {% endwith %}
        </ul>
        <div>
            {% if user.is_authenticated %}
                <button class="btn btn-secondary disabled mr-1">
                    <span class="text-white">{{ user.username }}</span>
                </button>
                <a class="btn btn-primary" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
            {% else %}
                <a class="btn btn-primary" href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Login</a>
            {% endif %}
        </div>
    </div>
</nav>

<main role="main" class="container">
    {% if messages %}
        <div class="row">
            <div class="col-12">
                {% for message in messages %}
                    <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}" role="alert">
                        {{ message|safe }}
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    <div class="row">
        <div class="col-12">
            {% block content %}
            {% endblock %}
        </div>
    </div>
</main>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script>
    // ENABLE BOOTSTRAP TOOLTIPS
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
    // END

    // NO EMPTY FORMS
    // Fetch all the forms we want to apply custom Bootstrap validation styles to.
    let forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission.
    Array.prototype.slice.call(forms)
        .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    // END
</script>

</body>
</html>